<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Pagina</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">


        <script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-hls/5.14.1/videojs-contrib-hls.js"></script>
        <script src="https://vjs.zencdn.net/7.2.3/video.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
        <style>
            body {
                margin:0px;
                background: black;
                color: white;
            }
             #tvStreamer, #tvStreamer_html5_api{
                width: 100%;
            }
            .vjs-modal-dialog, .vjs-control-text, .vjs-big-play-button{
                visibility: hidden;
            }
        </style>
    </head>
    <body>
        <div id="playerControls">
            <button id="pausePlayCustomButton" value="pause" onclick="customPlayPause()">Pause</button>
            <button id="muteUnmuteCustomButton" value="pause" onclick="customMuteUnmute()">Unmute</button>
            <form id='tvRemoteForm' action=''>
                <input  type='text'
                        id='tvRemoteButton'
                        name='tvRemoteButton'
                        value="1">
                <button type='submit'
                        id='submitButton'>
                    Submit
                </button>
            </form>
        </div>
        <video id="tvStreamer"  autoplay playsinline muted>
            <source src="/video/out.m3u8" type="application/x-mpegURL">
        </video>
        <script>
            var playerTV = videojs('tvStreamer',{
                controlBar:false,
                loadingSpinner: false,
                errorDisplay: false,
                captionsButton: false,
                chaptersButton: false,
                subtitlesButton: false,
                progressControl: false,
                remainingTimeDisplay: false,
                fullscreenToggle: false,
                playbackRateMenuButton: false
            });
            function customPlayPause() {
                let customButtonContent = "";
                if(playerTV.paused()){
                    customButtonContent  = "Pause";
                    playerTV.play();
                }else{
                    customButtonContent = "Play";
                    playerTV.pause();
                }
                document.getElementById("pausePlayCustomButton").innerHTML = customButtonContent;
            }
            function customMuteUnmute() {
                let customPauseButtonContent = "";
                if(playerTV.muted()){
                    customPauseButtonContent  = "Mute";
                    playerTV.muted(false);
                }else{
                    customPauseButtonContent = "Unmute";
                    playerTV.muted(true);
                }
                document.getElementById("muteUnmuteCustomButton").innerHTML = customPauseButtonContent;
            }
            // disable right click
            var playerTVelement = document.getElementById("tvStreamer");
            if (playerTVelement.addEventListener) {
                playerTVelement.addEventListener('contextmenu', function(e) {
                    e.preventDefault();
                }, false);
            } else {
                playerTVelement.attachEvent('oncontextmenu', function() {
                    window.event.returnValue = false;
                });
            }
        </script>
        <script>
            $('#tvRemoteForm').submit(function (event) {
                event.preventDefault();

                $.ajax({
                    type: "POST",
                    url: "/login",
                    data: $(this).serialize(),
                    success: function (data) {
                        console.log(data);
                        $('.result').html(data);
                    }
                });
            });

        </script>

    </body>
</html>